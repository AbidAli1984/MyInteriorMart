@page "/MyAccount/Listing/Category/{listingId:int?}"
@inject AuthenticationStateProvider authenticationState
@inject NotificationService _notice
@inject NavigationManager navManager
@using AntDesign
@using BOL.SHARED

<AuthorizeView>
    <Authorized>
        <div class="container my-5">
            <div class="row">
                <div class="col-md-12">
                    <div class="profile-sidebar-content">
                        <h4>Add Category Details</h4>
                        <p class="add-lidting-title-from">
                            Add Listing / Add Category Details
                            <span>
                                <a class="back_btn mx-3" href="/MyAccount/AddListing">Back</a>
                            </span>
                        </p>
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label>First Category <span class="text-danger">*</span></label>
                                <select class="form-control" @onchange="GetSecondCategoryIdByFirstCategoryId">
                                    @if (CategoryVM.FirstCategories != null && CategoryVM.FirstCategories.Count > 0)
                                    {
                                        <option selected>Choose...</option>
                                        foreach (var cat in CategoryVM.FirstCategories)
                                        {
                                            <option value="@cat.FirstCategoryID">@cat.Name</option>
                                        }
                                    }
                                    else
                                    {
                                        <option selected disabled>Choose...</option>
                                    }
                                </select>
                            </div>
                            <div class="form-group col-md-4">
                                <label>Second Category <span class="text-danger">*</span></label>
                                <select class="form-control" @onchange="GetOtherCategoriesBySecondCategoryId">
                                    @if (CategoryVM.SecondCategories != null && CategoryVM.SecondCategories.Count > 0)
                                    {
                                        <option selected>Choose...</option>
                                        foreach (var cat in CategoryVM.SecondCategories)
                                        {
                                            <option value="@cat.SecondCategoryID">@cat.Name</option>
                                        }
                                    }
                                    else
                                    {
                                        <option selected disabled>Choose...</option>
                                    }
                                </select>
                            </div>
                        </div>
                        @if (CategoryVM.Category != null && CategoryVM.Category.SecondCategoryID > 0)
                        {
                            <div class="row">
                                <div class="col-md-12 add_bottom_15">
                                    <button class="btn btn-primary" @onclick="@(async () => await SelectAllCategories())">Select All</button>
                                </div>
                            </div>
                        }
                        <div class="row">
                            @if (CategoryVM.ThirdCategories != null && CategoryVM.ThirdCategories.Count > 0)
                            {
                                @foreach (var cat in CategoryVM.ThirdCategories)
                                {
                                    <div class="col-md-3">
                                        <div class="clearfix add_bottom_15">
                                            <div class="checkboxes float-left">
                                                <label class="container_check">
                                                    @cat.Name
                                                    <input type="checkbox" @bind="cat.IsSelected">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                            @if (CategoryVM.FourthCategories != null && CategoryVM.FourthCategories.Count > 0)
                            {
                                @foreach (var cat in CategoryVM.FourthCategories)
                                {
                                    <div class="col-md-3">
                                        <div class="clearfix add_bottom_15">
                                            <div class="checkboxes float-left">
                                                <label class="container_check">
                                                    @cat.Name
                                                    <input type="checkbox" @bind="cat.IsSelected">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                            @if (CategoryVM.FifthCategories != null && CategoryVM.FifthCategories.Count > 0)
                            {
                                @foreach (var cat in CategoryVM.FifthCategories)
                                {
                                    <div class="col-md-3">
                                        <div class="clearfix add_bottom_15">
                                            <div class="checkboxes float-left">
                                                <label class="container_check">
                                                    @cat.Name
                                                    <input type="checkbox" @bind="cat.IsSelected">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                            @if (CategoryVM.SixthCategories != null && CategoryVM.SixthCategories.Count > 0)
                            {
                                @foreach (var cat in CategoryVM.SixthCategories)
                                {
                                    <div class="col-md-3">
                                        <div class="clearfix add_bottom_15">
                                            <div class="checkboxes float-left">
                                                <label class="container_check">
                                                    @cat.Name
                                                    <input type="checkbox" @bind="cat.IsSelected">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                        </div>
                        <div class="row">
                            <div class="text-left col-12 mt-3">
                                @if (buttonBusy)
                                {
                                    <button class="btn btn-secondary">Saving...</button>
                                }
                                else
                                {
                                    <button class="btn btn-primary" @onclick="@(async() => await CreateListingCategory())">Save & Continue</button>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </Authorized>
    <NotAuthorized>
        <UnAuthorizedUser />
    </NotAuthorized>
</AuthorizeView>