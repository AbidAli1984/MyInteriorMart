@page "/Listing/Index/{ListingID}"
@inject AuditDbContext auditContext
@inject CategoriesDbContext categoriesContext
@inject SharedDbContext sharedContext
@inject AuthenticationStateProvider authenticationState
@inject NotificationService _notice
@inject IJSRuntime jsRuntime

<div class="container individual-listing">
    <link href="/resources/css/ListingDetails.css" rel="stylesheet" />
    <div class="row">
        @if (listingDetailVM != null)
        {
            <div class="col-lg-3 individual-listing-sidebar padding-5">
                <div class="box_detail_cus">
                    <div class="cust-profile">
                        @if (listingDetailVM.OwnerImages == null || listingDetailVM.OwnerImages.Count <= 0)
                        {
                            <img src="resources/img/icon/profile.svg" alt="profile">
                            <h6 class="cust-name">
                                @listingDetailVM.Listing.Name
                                @if (userAgent != null)
                                {
                                    <span>@userAgent</span>
                                }
                            </h6>
                            <span class="cust-type">Owner</span>
                        }
                        else
                        {
                            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                    @foreach (var image in listingDetailVM.OwnerImages)
                                    {
                                        <div class="carousel-item @(count++ == 0 ? "active" : "")">
                                            <img src="@image.ImagePath" alt="profile">
                                            <h4 class="cust-name">@image.OwnerName</h4>
                                            <span class="cust-type">@image.Designation</span>
                                        </div>
                                    }
                                </div>
                                <a class="carousel-control-prev" href="#carouselExampleControls" role="button"
                                   data-slide="prev">
                                    <i class="fa fa-chevron-left" aria-hidden="true" style="color: gray;"></i>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#carouselExampleControls" role="button"
                                   data-slide="next">
                                    <i class="fa fa-chevron-right" aria-hidden="true" style="color: gray;"></i>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        }
                    </div>
                </div>
                <div class="listing-specialisat box_detail_cus">
                    <h6>Categories</h6>
                    <ul class="listing-specialisat-list">
                        <li><i class="fa fa-check"></i> Category 1</li>
                        <li><i class="fa fa-check"></i> Category 2</li>
                        <li><i class="fa fa-check"></i> Category 3</li>
                        <li><i class="fa fa-check"></i> Category 4</li>
                    </ul>
                </div>
                <div class="listing-specialisat box_detail_cus">
                    <h6>Specialisation</h6>
                    <ul class="listing-specialisat-list">
                        @if (listingDetailVM.Specialisation.AcceptTenderWork)
                        {
                            <li><i class="icon-check-1"></i> Accept Tender Work</li>
                        }
                        @if (listingDetailVM.Specialisation.Banks)
                        {
                            <li><i class="icon-check-1"></i> Bank</li>
                        }
                        @if (listingDetailVM.Specialisation.ExhibitionStall)
                        {
                            <li><i class="icon-check-1"></i> Exhibition Stall</li>
                        }
                        @if (listingDetailVM.Specialisation.Hotel)
                        {
                            <li><i class="icon-check-1"></i> Hotel</li>
                        }
                        @if (listingDetailVM.Specialisation.Restaurants)
                        {
                            <li><i class="icon-check-1"></i> Restaurants</li>
                        }
                        @if (listingDetailVM.Specialisation.BeautyParlors)
                        {
                            <li><i class="icon-check-1"></i> Beauty Parlors</li>
                        }
                        @if (listingDetailVM.Specialisation.Factory)
                        {
                            <li><i class="icon-check-1"></i> Factory</li>
                        }
                        @if (listingDetailVM.Specialisation.Laboratory)
                        {
                            <li><i class="icon-check-1"></i> Laboratory</li>
                        }
                        @if (listingDetailVM.Specialisation.Salons)
                        {
                            <li><i class="icon-check-1"></i> Salons</li>
                        }
                        @if (listingDetailVM.Specialisation.Bungalow)
                        {
                            <li><i class="icon-check-1"></i> Bungalow</li>
                        }
                        @if (listingDetailVM.Specialisation.Farmhouse)
                        {
                            <li><i class="icon-check-1"></i> Farmhouse</li>
                        }
                        @if (listingDetailVM.Specialisation.Mandir)
                        {
                            <li><i class="icon-check-1"></i> Mandir</li>
                        }
                        @if (listingDetailVM.Specialisation.Shop)
                        {
                            <li><i class="icon-check-1"></i> Shop</li>
                        }
                        @if (listingDetailVM.Specialisation.CallCenter)
                        {
                            <li><i class="icon-check-1"></i> Call Center</li>
                        }
                        @if (listingDetailVM.Specialisation.Gurudwara)
                        {
                            <li><i class="icon-check-1"></i> Gurudwara</li>
                        }
                        @if (listingDetailVM.Specialisation.Mosque)
                        {
                            <li><i class="icon-check-1"></i> Mosque</li>
                        }
                        @if (listingDetailVM.Specialisation.ShoppingMall)
                        {
                            <li><i class="icon-check-1"></i> Shopping Mall</li>
                        }
                        @if (listingDetailVM.Specialisation.Church)
                        {
                            <li><i class="icon-check-1"></i> Church</li>
                        }
                        @if (listingDetailVM.Specialisation.Gym)
                        {
                            <li><i class="icon-check-1"></i> Gym</li>
                        }
                        @if (listingDetailVM.Specialisation.Office)
                        {
                            <li><i class="icon-check-1"></i> Office</li>
                        }
                        @if (listingDetailVM.Specialisation.Showroom)
                        {
                            <li><i class="icon-check-1"></i> Showroom</li>
                        }
                        @if (listingDetailVM.Specialisation.Company)
                        {
                            <li><i class="icon-check-1"></i> Company</li>
                        }
                        @if (listingDetailVM.Specialisation.HealthClub)
                        {
                            <li><i class="icon-check-1"></i> Health Club</li>
                        }
                        @if (listingDetailVM.Specialisation.Plazas)
                        {
                            <li><i class="icon-check-1"></i> Plazas</li>
                        }
                        @if (listingDetailVM.Specialisation.Warehouse)
                        {
                            <li><i class="icon-check-1"></i> Warehouse</li>
                        }
                        @if (listingDetailVM.Specialisation.ComputerInstitute)
                        {
                            <li><i class="icon-check-1"></i> Computer Institute</li>
                        }
                        @if (listingDetailVM.Specialisation.Home)
                        {
                            <li><i class="icon-check-1"></i> Home</li>
                        }
                        @if (listingDetailVM.Specialisation.ResidentialSociety)
                        {
                            <li><i class="icon-check-1"></i> Residential Society</li>
                        }
                        @if (listingDetailVM.Specialisation.Dispensary)
                        {
                            <li><i class="icon-check-1"></i> Dispensary</li>
                        }
                        @if (listingDetailVM.Specialisation.Hospital)
                        {
                            <li><i class="icon-check-1"></i> Hospital</li>
                        }
                        @if (listingDetailVM.Specialisation.Resorts)
                        {
                            <li><i class="icon-check-1"></i> Resorts</li>
                        }
                    </ul>
                </div>
                <div class="listing-specialisat box_detail_cus">
                    <h6>PAYMENT DETAILS</h6>
                    <ul class="listing-specialisat-list">
                        @if (listingDetailVM.PaymentMode.Cash)
                        {
                            <li><i class="icon-check-1"></i> Cash</li>
                        }

                        @if (listingDetailVM.PaymentMode.NetBanking)
                        {
                            <li><i class="icon-check-1"></i> Net Banking</li>
                        }

                        @if (listingDetailVM.PaymentMode.Cheque)
                        {
                            <li><i class="icon-check-1"></i> Cheque</li>
                        }

                        @if (listingDetailVM.PaymentMode.RtgsNeft)
                        {
                            <li><i class="icon-check-1"></i> RTGS &amp; NEFT</li>
                        }

                        @if (listingDetailVM.PaymentMode.DebitCard)
                        {
                            <li><i class="icon-check-1"></i> Debit Card</li>
                        }

                        @if (listingDetailVM.PaymentMode.CreditCard)
                        {
                            <li><i class="icon-check-1"></i> Credit Card</li>
                        }

                        @if (listingDetailVM.PaymentMode.PayTM)
                        {
                            <li><i class="icon-check-1"></i> Pay TM</li>
                        }

                        @if (listingDetailVM.PaymentMode.PhonePay)
                        {
                            <li><i class="icon-check-1"></i> Phone Pay</li>
                        }

                        @if (listingDetailVM.PaymentMode.Paypal)
                        {
                            <li><i class="icon-check-1"></i> Paypal</li>
                        }
                    </ul>
                </div>
            </div>
            <div class="col-lg-9 individual-listing-main padding-5">
                <div class="listing-gallery">
                    <div class="gallery">
                        <a href="/resources/img/hero_in_restaurants_detail.jpg" class="big">
                            <img src="/resources/img/hero_in_restaurants_detail.jpg" alt="Image 2" title="Image 2" style="width: 100%;">
                        </a>
                    </div>
                </div>
                <div class="company-listing-main">
                    <div class="listing-details">
                        @*<div class="col-lg-4 col-md-12 company-map padding-all-5">
                                <div class="gmap_canvas">
                                    <iframe width="100%" height="315" id="gmap_canvas" src="https://maps.google.com/maps?q=Creative&#x2B;Concept&#x2B;Pvt.&#x2B;Ltd.&t=&z=13&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>
                                </div>
                            </div>*@
                        <div class="col-lg-4 col-md-12 company-map padding-all-5">
                            @if (listingDetailVM.GalleryImages != null && listingDetailVM.GalleryImages.Count > 0)
                            {
                                <div class="product-large-slider">
                                    @foreach (var image in listingDetailVM.GalleryImages)
                                    {
                                        <div class="pro-large-img img-zoom gallery1">
                                            <a href="@image.ImagePath" class="big">
                                                <img src="@image.ImagePath" alt="Gallery Image" style="width: 100%;" />
                                            </a>
                                            <p class="gallery_img_title">@image.ImageTitle</p>
                                        </div>
                                    }
                                </div>
                                <div class="pro-nav slick-row-10 slick-arrow-style">
                                    @foreach (var image in listingDetailVM.GalleryImages)
                                    {
                                        <div class="pro-nav-thumb">
                                            <img src="@image.ImagePath" alt="Gallery Image" />
                                        </div>
                                    }
                                </div>
                            }
                        </div>
                        <div class="col-lg-8 col-md-12 company-details-list padding-all-5">
                            <div class="company-addes">
                                <div class="company-details">
                                    <h5 class="company-name">@listingDetailVM.Listing.CompanyName</h5>
                                    <small>
                                        <a href="#0" class="claimbusiness"><i class="icon-pencil-1"></i>write a preview</a>
                                    </small>
                                </div>
                                <span class="company-category-name">@listingDetailVM.FirstCategory > @listingDetailVM.SecondCategory</span>
                                <div class="company-rating">
                                    @listingDetailVM.RatingAverage.ToString("0.0")
                                    <div class="cat_star">
                                        <i class="icon_star @(listingDetailVM.RatingAverage >= 1 ? "active" : "")"></i>
                                        <i class="icon_star @(listingDetailVM.RatingAverage >= 2 ? "active" : "")"></i>
                                        <i class="icon_star @(listingDetailVM.RatingAverage >= 3 ? "active" : "")"></i>
                                        <i class="icon_star @(listingDetailVM.RatingAverage >= 4 ? "active" : "")"></i>
                                        <i class="icon_star @(listingDetailVM.RatingAverage >= 5 ? "active" : "")"></i>
                                    </div>
                                    @listingDetailVM.RatingCount ratings
                                </div>
                            </div>
                            <div class="col-lg-12 mim-Address">
                                <p>
                                    <i class="fa fa-map-marker"></i>
                                    @if (ToggleCompleteAddress)
                                    {
                                        <span>@listingDetailVM.Address.LocalAddress, @listingDetailVM.Address.Locality, </span>
                                    }
                                    <span>@listingDetailVM.Address.Assembly, @listingDetailVM.Address.City - @listingDetailVM.Address.Pincode, @listingDetailVM.Address.State,  @listingDetailVM.Address.Country </span>
                                    <a href="" @onclick:preventDefault @onclick="@(async () => await ToggleCompleteAddressAsync())">@(ToggleCompleteAddress ? "less" : "more")...</a>
                                </p>

                                <p>
                                    <i class="fa fa-map-signs"></i> @listingDetailVM.Address.Assembly
                                    <span><i class="fa fa-map-o"></i> @listingDetailVM.Address.City</span>
                                </p>
                            </div>
                            <div class="col-lg-12">
                                <div class="row">
                                    <div class="col-md-6 p-0">
                                        @if (listingDetailVM.Communication != null)
                                        {
                                            <i class="fa fa-phone"></i>
                                            if (!string.IsNullOrWhiteSpace(listingDetailVM.Communication.Mobile))
                                            {
                                                <a href="tel:@listingDetailVM.Communication.Mobile" title="Call Now">@listingDetailVM.Communication.Mobile</a>
                                            }
                                            if (!string.IsNullOrWhiteSpace(listingDetailVM.Communication.Whatsapp))
                                            {
                                                <a href="tel:@listingDetailVM.Communication.Whatsapp" title="Whatsapp"> | @listingDetailVM.Communication.Whatsapp</a>
                                            }
                                            if (listingDetailVM.Communication.Telephone != null)
                                            {
                                                <a href="tel:@listingDetailVM.Communication.Telephone" title="Telephone 1"> | @listingDetailVM.Communication.Telephone</a>
                                            }
                                            if (listingDetailVM.Communication.TelephoneSecond != null)
                                            {
                                                <a href="tel:@listingDetailVM.Communication.TelephoneSecond" title="Telephone 2"> | @listingDetailVM.Communication.TelephoneSecond</a>
                                            }
                                        }
                                    </div>
                                    @if (!string.IsNullOrWhiteSpace(@listingDetailVM.Listing.GSTNumber))
                                    {
                                        <div class="col-md-6 p-0 d-flex justify-content-end">
                                            <p class="mb-2">
                                                <b>GST NO : </b>@listingDetailVM.Listing.GSTNumber
                                            </p>
                                        </div>
                                    }
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="row">
                                    <div class="col-12 col-md-6 p-0 company-website">
                                        @if (!string.IsNullOrWhiteSpace(listingDetailVM.Communication.Website))
                                        {
                                            <i class="fa fa-globe"></i>
                                            <a href="http://@listingDetailVM.Communication.Website" target="_blank"
                                               title="@listingDetailVM.Communication.Website">
                                                @listingDetailVM.Communication.Website
                                            </a>
                                        }
                                    </div>
                                    <div class="col-12 col-md-6 p-0 d-flex justify-content-end  company-establishment">
                                        <p class="mb-2"><i class="fa fa-calendar"></i> Year of Establishment @listingDetailVM.Listing.YearOfEstablishment.ToString("yyyy") </p>
                                    </div>
                                </div>
                            </div>
                            <div class="company-time">
                                <a class="company-time-title btn btn-link collapsed" data-toggle="collapse" href="#companytime" role="button" aria-expanded="false" aria-controls="companytime">
                                    <i class="fa fa-clock-o"></i>
                                    <span>
                                        <b style="color: @(listingDetailVM.BusinessWorkingHour.IsBusinessOpen ? "green" : "red");"> @listingDetailVM.BusinessWorkingHour.IsBusinessOpenText</b>
                                        @if (!listingDetailVM.BusinessWorkingHour.IsBusinessOpen)
                                        {
                                            <span>: Opens @listingDetailVM.BusinessWorkingHour.OpenTime <b>@listingDetailVM.BusinessWorkingHour.OpenDay</b></span>
                                        }
                                    </span>
                                </a>
                                <div class="collapse" id="companytime">
                                    <div class="card card-body">
                                        <div class="row">
                                            <div class="col-3">Monday</div>
                                            <div class="col-9">
                                                @listingDetailVM.WorkingHour.MondayFrom.ToString("hh:mm tt") to @listingDetailVM.WorkingHour.MondayTo.ToString("hh:mm tt")
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3">Tuesday</div>
                                            <div class="col-9">
                                                @listingDetailVM.WorkingHour.TuesdayFrom.ToString("hh:mm tt") to @listingDetailVM.WorkingHour.TuesdayTo.ToString("hh:mm tt")
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3">Wednesday</div>
                                            <div class="col-9">
                                                @listingDetailVM.WorkingHour.WednesdayFrom.ToString("hh:mm tt") to @listingDetailVM.WorkingHour.WednesdayTo.ToString("hh:mm tt")
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3">Friday</div>
                                            <div class="col-9">
                                                @listingDetailVM.WorkingHour.FridayFrom.ToString("hh:mm tt") to @listingDetailVM.WorkingHour.FridayTo.ToString("hh:mm tt")
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3">Saturday</div>
                                            <div class="col-9">
                                                @if (@listingDetailVM.WorkingHour.SaturdayHoliday)
                                                {
                                                    <span>Closed</span>
                                                }
                                                else
                                                {
                                                    <span>@listingDetailVM.WorkingHour.SaturdayFrom.ToString("hh:mm tt")to @listingDetailVM.WorkingHour.SaturdayTo.ToString("hh:mm tt")</span>
                                                }
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-3">Sunday</div>
                                            <div class="col-9">
                                                @if (@listingDetailVM.WorkingHour.SundayHoliday)
                                                {
                                                    <span>Closed</span>
                                                }
                                                else
                                                {
                                                    <span>@listingDetailVM.WorkingHour.SundayFrom.ToString("hh:mm tt") to @listingDetailVM.WorkingHour.SundayTo.ToString("hh:mm tt")</span>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="social-details">
                                <a href="#enquiry-in-dialog1" title="Send Enquiry" id="enquiry-in" class="btn btn-success btn-sm">Enquire Now</a>
                                @*@if (HideContact)
                                    {
                                        <button @onclick="@(async () => await ToggleContact())" class="btn btn-success btn-sm" id="ViewNumber"><i class="icon-eye"></i> Show Contact</button>
                                    }
                                    else
                                    {
                                        <button @onclick="@(async () => await ToggleContact())" class="btn btn-danger btn-sm" id="HideNumber">
                                            <i class="icon-eye-off"></i> Hide Contact
                                        </button>
                                    }*@
                                <a href="#0" class="mim-marginLeft-Minus20 btn btn-light btn-sm"><i class="icon-share"></i></a>

                                @{
                                    string likeThumbIcon;
                                    if (like)
                                    {
                                        likeThumbIcon = "fa fa-thumbs-o-down";
                                    }
                                    else
                                    {
                                        likeThumbIcon = "fa fa-thumbs-o-up";
                                    }
                                }
                                @if (userAuthenticated)
                                {
                                    <button id="BookmarkMe" class="pushRight btn btn-light btn-sm" @onclick="@(async () => await ToggleBookmark(listingDetailVM.Listing.ListingID))">
                                        <i class="fa fa-bookmark-o"></i> Bookmark <span id="BookmarkCount">@countBookmark</span>
                                    </button>
                                    <button id="LikeMe" class="pushRight btn btn-light btn-sm ml-1" @onclick="@(async () => await ToggleLikeAsync(Int32.Parse(ListingID)))">
                                        <i class="@likeThumbIcon"></i><span id="LikeCount">@countLike</span>
                                    </button>
                                    <button id="SubscribeMe" class="pushRight btn btn-light btn-sm ml-1" @onclick="@(async () => await ToggleSubscribeAsync(Int32.Parse(ListingID)))">
                                        <i class="fa fa-bell-o"></i> Unsubscribe <span id="SubscribeCount">@countSubscribe</span>
                                    </button>
                                }
                                else
                                {
                                    <button id="BookmarkMe" class="pushRight btn btn-light btn-sm">
                                        <i class="fa fa-bookmark-o"></i> Bookmark <span id="BookmarkCount">@countBookmark</span>
                                    </button>
                                    <button id="LikeMe" class="pushRight btn btn-light btn-sm ml-1">
                                        <i class="@likeThumbIcon"></i><span id="LikeCount">@countLike</span>
                                    </button>
                                    <button id="SubscribeMe" class="pushRight btn btn-light btn-sm ml-1">
                                        <i class="fa fa-bell-o"></i> Subscribe <span id="SubscribeCount">@countSubscribe</span>
                                    </button>
                                }
                            </div>
                            <div class="col-lg-12 social-share p-0">
                                <a href="#0"><i class="icon-facebook-squared-1"></i></a>
                                <a href="#0"><i class="fa fa-whatsapp"></i></a>
                                <a href="#0"><i class="icon-linkedin-3"></i></a>
                                <a href="#0"><i class="icon-twitter-rect"></i></a>
                                <a href="#0"><i class="icon-youtube-play"></i></a>
                                <a href="#0"><i class="icon-instagramm"></i></a>
                                <a href="#0"><i class="icon-pinterest-squared"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="banner-block one-block my-5">
                        <div class="row px-3">
                            <div class="col-12">
                                <h3>About Us </h3>
                                <p>
                                    @listingDetailVM.Listing.CompanyName
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="company-listing-tab">
                        <div class="step">
                            <ul class="nav nav-tabs" id="tab_checkout" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="reviews-tab" data-toggle="tab" href="#reviews" role="tab" aria-controls="reviews" aria-selected="true">Reviews</a>
                                </li>
                            </ul>
                            <div class="tab-content checkout">
                                <div class="tab-pane fade show active" id="reviews" role="tabpanel" aria-labelledby="reviews">
                                    <div class="review-form mb-3">
                                        @if (userAuthenticated)
                                        {
                                            <a class="btn btn-link" data-toggle="collapse" href="#WriteReview" role="button" aria-expanded="false" aria-controls="WriteReview">
                                                <i class="icon-pencil"></i> @(CurrentUserRating == null ? "Write Review" : "Edit Review")
                                            </a>
                                            <div class="add-review collapse" id="WriteReview">
                                                <div class="card card-body">
                                                    <h6>@(CurrentUserRating == null ? "Leave a Review" : "Edit Review")</h6>
                                                    <div class="row">
                                                        <div class="form-group col-md-6">
                                                            <Rate @bind-Value="Rating" />
                                                        </div>
                                                        <div class="form-group col-md-12">
                                                            <label>Your Review</label>
                                                            <textarea @bind="@Comment" name="review_text" id="review_text" class="form-control" style="height:130px !important;"></textarea>
                                                        </div>
                                                        <div class="form-group col-md-12 add_top_20 add_bottom_30">
                                                            @if (CurrentUserRating == null)
                                                            {
                                                                <button class="btn btn-primary" @onclick="@(async () => await CreateRatingAsync())">Save Rating</button>
                                                            }
                                                            else
                                                            {
                                                                <button @onclick="@(async () => await EditSaveRatingAsync())">Save Rating</button>
                                                            }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        else
                                        {
                                            <a class="btn btn-link" href="/Auth/Login" role="button">
                                                <i class="icon-pencil"></i> Login to Write Review
                                            </a>
                                        }
                                    </div>
                                    <div class="row">
                                        @foreach (var review in listingDetailVM.listReviews)
                                        {
                                            <div class="col-12  col-lg-12 review-user">
                                                <h6>Latest review by @review.Name on @review.Date</h6>
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="row">
                                                            <div class="col col-lg-1 text-center">
                                                                <img src="@review.UserImage" class="rounded-circle img-thumbnail">
                                                            </div>
                                                            <div class="col-lg-10 pl-lg-0">
                                                                <div class="cat_star">
                                                                    <i class="icon_star @(review.Ratings >= 1 ? "active" : "")"></i>
                                                                    <i class="icon_star @(review.Ratings >= 2 ? "active" : "")"></i>
                                                                    <i class="icon_star @(review.Ratings >= 3 ? "active" : "")"></i>
                                                                    <i class="icon_star @(review.Ratings >= 4 ? "active" : "")"></i>
                                                                    <i class="icon_star @(review.Ratings >= 5 ? "active" : "")"></i>
                                                                    <span><strong>@review.Name – @review.Date</strong> </span>
                                                                </div>
                                                                <p>@review.Comment<a href="#0"> view more...</a></p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @if (String.IsNullOrEmpty(ErrorMessage) == false)
                {
                    <div class="d-flex justify-content-center">
                        <p>@ErrorMessage</p>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="d-flex justify-content-center">
                <div class="spinner-border" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
        }
    </div>
</div>